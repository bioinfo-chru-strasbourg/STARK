######################################
# Docker service STARK configuration #
######################################



#####################
# DOCKER SUBMODULES #
#####################


### SUBMODULE INFOS

DOCKER_STARK_MODULE_SUBMODULE_NAME=stark
DOCKER_STARK_MODULE_SUBMODULE_RELEASE=1.0


### SUBMODULE ENV file
# File used within docker containers to configure env variables (usually self)

DOCKER_STARK_MODULE_SUBMODULE_ENV=./STARK.${DOCKER_STARK_MODULE_SUBMODULE_NAME}.env


### MODULE container prefix

DOCKER_STARK_MODULE_SUBMODULE_PREFIX=${DOCKER_STARK_MODULE_PREFIX}-submodule-${DOCKER_STARK_MODULE_SUBMODULE_NAME}




###################
# DOCKER SERVICES #
###################


# SERVICES MAIN CONFIG
########################


### CONFIG folders
# configuration of main configuration folder
# host folders to mount as volume into docker container
# inner folder within the docker container (Configuration files by default within STARK image)


# CONFIG/MYAPPS
# STARK folder host/inner containing specific application configuration (see STARK doc).
DOCKER_STARK_MODULE_SUBMODULE_MAIN_CONFIG_HOST_FOLDER_CONFIG_MYAPPS=${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_CONFIG}/myapps
DOCKER_STARK_MODULE_SUBMODULE_MAIN_CONFIG_INNER_FOLDER_CONFIG_MYAPPS=${DOCKER_STARK_INNER_FOLDER_CONFIG}/myapps


# CONFIG/HOWARD
# STARK folder host/inner containing HOWARD configuration for annotation and prioritization (see STARK/HOWARD doc).
DOCKER_STARK_MODULE_SUBMODULE_MAIN_CONFIG_HOST_FOLDER_CONFIG_HOWARD=${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_CONFIG}/howard
DOCKER_STARK_MODULE_SUBMODULE_MAIN_CONFIG_INNER_FOLDER_CONFIG_HOWARD=${DOCKER_STARK_INNER_FOLDER_CONFIG}/howard



# SERVICE CLI
###############


### DOCKER SERVICE INFOS

DOCKER_STARK_MODULE_SUBMODULE_SERVICE_CLI_NAME=cli
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_CLI_RELEASE=1.0


### DOCKER SERVICE IMAGE
# Docker STARK service to build images if necessary. Usually on a git repository or locally

#DOCKER_STARK_MODULE_SUBMODULE_SERVICE_CLI_IMAGE_REPOSITORY=${DOCKER_STARK_SERVICE_IMAGE_REGISTRY}
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_CLI_IMAGE_NAME=${DOCKER_STARK_MODULE_SUBMODULE_PREFIX}-service-${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_CLI_NAME}
#DOCKER_STARK_MODULE_SUBMODULE_SERVICE_CLI_IMAGE_TAG=1.0
#DOCKER_STARK_MODULE_SUBMODULE_SERVICE_CLI_IMAGE_CONTEXT=./${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_CLI_NAME}/dockerfile
#DOCKER_STARK_MODULE_SUBMODULE_SERVICE_CLI_IMAGE_CONTEXT_DOCKERFILE=Dockerfile
#DOCKER_STARK_MODULE_SUBMODULE_SERVICE_CLI_IMAGE=${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_CLI_IMAGE_REPOSITORY}${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_CLI_IMAGE_NAME}:${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_CLI_IMAGE_TAG}
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_CLI_IMAGE=${DOCKER_STARK_IMAGE}


### DOCKER SERVICE CONTAINER

DOCKER_STARK_MODULE_SUBMODULE_SERVICE_CLI_CONTAINER_NAME=${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_CLI_IMAGE_NAME}
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_CLI_CONTAINER_ENTRYPOINT=/bin/bash
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_CLI_CONTAINER_COMMAND='-c "while true; do sleep $SLEEP; done"'
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_CLI_CONTAINER_RESTART=always
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_CLI_CONTAINER_ENV_FILE=./${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_CLI_NAME}/STARK.env



### DOCKER SERVICE CONFIG

DOCKER_STARK_MODULE_SUBMODULE_SERVICE_CLI_HOST_FOLDER_CONFIG=${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_CONFIG}/${DOCKER_STARK_MODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_NAME}
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_CLI_INNER_FOLDER_CONFIG=${DOCKER_STARK_INNER_FOLDER_CONFIG}/${DOCKER_STARK_MODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_NAME}


### DOCKER SERVICE SERVICE

DOCKER_STARK_MODULE_SUBMODULE_SERVICE_CLI_HOST_FOLDER_SERVICES=${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_SERVICES}/${DOCKER_STARK_MODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_NAME}
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_CLI_INNER_FOLDER_SERVICES=${DOCKER_STARK_INNER_FOLDER_SERVICES}/${DOCKER_STARK_MODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_NAME}



### DOCKER SERVICE PARAMETERS
# Parameters used by the container

# Sleep time for the CLI service
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_CLI_PARAM_SLEEP=600




# SERVICE DAS
###############


### DOCKER SERVICE INFOS

DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_NAME=das
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_RELEASE=1.0


### DOCKER SERVICE IMAGE
# Docker STARK service to build images if necessary. Usually on a git repository or locally

DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_IMAGE_REPOSITORY=${DOCKER_STARK_SERVICE_IMAGE_REGISTRY}
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_IMAGE_NAME=${DOCKER_STARK_MODULE_SUBMODULE_PREFIX}-service-${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_NAME}
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_IMAGE_TAG=1.0
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_IMAGE_CONTEXT=./${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_NAME}/dockerfile
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_IMAGE_CONTEXT_DOCKERFILE=Dockerfile
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_IMAGE=${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_IMAGE_REPOSITORY}${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_IMAGE_NAME}:${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_IMAGE_TAG}


### DOCKER SERVICE CONTAINER

DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_CONTAINER_NAME=${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_IMAGE_NAME}
#DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_CONTAINER_ENTRYPOINT=
#DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_CONTAINER_COMMAND=''
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_CONTAINER_RESTART=always
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_CONTAINER_ENV_FILE=./${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_NAME}/STARK.env


### DOCKER SERVICE CONFIG

DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_HOST_FOLDER_CONFIG=${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_CONFIG}/${DOCKER_STARK_MODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_NAME}
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_INNER_FOLDER_CONFIG=${DOCKER_STARK_INNER_FOLDER_CONFIG}/${DOCKER_STARK_MODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_NAME}


### DOCKER SERVICE SERVICE

DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_HOST_FOLDER_SERVICES=${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_SERVICES}/${DOCKER_STARK_MODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_NAME}
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_INNER_FOLDER_SERVICES=${DOCKER_STARK_INNER_FOLDER_SERVICES}/${DOCKER_STARK_MODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_NAME}



### DOCKER SERVICE PARAMETERS
# Parameters used by the container

# Inner Data folders
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_PARAM_INNER_FOLDER_DATA=/app/igvjs/

# URL Data folders
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_PARAM_URL_PUBLIC=static/data/public

# Inner public Data folders 
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_PARAM_INNER_FOLDER_PUBLIC=${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_PARAM_INNER_FOLDER_DATA}/${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_PARAM_URL_PUBLIC}

# Inner subfolders
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_PARAM_INNER_FOLDER_PUBLIC_SUBFOLDER_SERVICES=services
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_PARAM_INNER_FOLDER_PUBLIC_SUBFOLDER_DATABASES=databases
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_PARAM_INNER_FOLDER_PUBLIC_SUBFOLDER_DATA=data
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_PARAM_INNER_FOLDER_PUBLIC_SUBFOLDER_INPUTS=inputs
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_PARAM_INNER_FOLDER_PUBLIC_SUBFOLDER_REPOSITORIES=repositories

# Port mapping
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_PARAM_PORT_PUBLISHED=${DOCKER_STARK_SERVICE_PORT_PATTERN}01
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_DAS_PARAM_PORT_TARGET=5000




# SERVICE API
###############


### DOCKER SERVICE INFOS

DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_NAME=api
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_RELEASE=1.0


### DOCKER SERVICE IMAGE
# Docker STARK service to build images if necessary. Usually on a git repository or locally

DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_IMAGE_REPOSITORY=${DOCKER_STARK_SERVICE_IMAGE_REGISTRY}
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_IMAGE_NAME=${DOCKER_STARK_MODULE_SUBMODULE_PREFIX}-service-${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_NAME}
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_IMAGE_TAG=1.0
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_IMAGE_CONTEXT=./${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_NAME}/dockerfile
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_IMAGE_CONTEXT_DOCKERFILE=centos.Dockerfile
#DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_IMAGE_CONTEXT_DOCKERFILE=centos.Dockerfile
#DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_IMAGE_CONTEXT_DOCKERFILE=alpine.Dockerfile
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_IMAGE=${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_IMAGE_REPOSITORY}${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_IMAGE_NAME}:${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_IMAGE_TAG}


### DOCKER SERVICE CONTAINER

DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_CONTAINER_NAME=${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_IMAGE_NAME}
#DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_CONTAINER_ENTRYPOINT=
#DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_CONTAINER_COMMAND=''
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_CONTAINER_RESTART=always
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_CONTAINER_ENV_FILE=./${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_NAME}/STARK.env



### DOCKER SERVICE CONFIG

DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_HOST_FOLDER_CONFIG=${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_CONFIG}/${DOCKER_STARK_MODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_NAME}
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_INNER_FOLDER_CONFIG=${DOCKER_STARK_INNER_FOLDER_CONFIG}/${DOCKER_STARK_MODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_NAME}


### DOCKER SERVICE SERVICE

DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_HOST_FOLDER_SERVICES=${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_SERVICES}/${DOCKER_STARK_MODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_NAME}
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_INNER_FOLDER_SERVICES=${DOCKER_STARK_INNER_FOLDER_SERVICES}/${DOCKER_STARK_MODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_NAME}



### DOCKER SERVICE PARAMETERS
# Parameters used by the container

# Port mapping
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_PARAM_PORT_PUBLISHED=${DOCKER_STARK_SERVICE_PORT_PATTERN}00
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_PARAM_PORT_TARGET=8000

# Task Spooler
# Tack Spooler allows queuing task for each service.
# Disable with null binary
# Task Spooler binary
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_PARAM_TASK_SPOOLER_BIN=ts
# Task Spooler Queue List
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_PARAM_TASK_SPOOLER_TS_SAVELIST=/ts-tmp
# Task Spooler Socket
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_PARAM_TASK_SPOOLER_TS_SOCKET=/ts-tmp/STARK

# Shell
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_PARAM_SHELL=/bin/bash

# Folders
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_PARAM_LOG_FOLDER=${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_INNER_FOLDER_SERVICES}
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_PARAM_RUNS_FOLDER=${DOCKER_STARK_INNER_FOLDER_MAIN}/${DOCKER_STARK_FOLDER_INPUT}/runs 

# Container mount
# Docker STARK container mount parameters (default "", no acces to data. Usually databases, config, input, output, and API log) 
# Docker STARK container mount parameters - databases config data input repository archives services
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_PARAM_CONTAINER_MOUNT=-v ${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_DATABASES}:${DOCKER_STARK_INNER_FOLDER_DATABASES}:ro -v ${DOCKER_STARK_MODULE_SUBMODULE_MAIN_CONFIG_HOST_FOLDER_CONFIG_MYAPPS}:${DOCKER_STARK_MODULE_SUBMODULE_MAIN_CONFIG_INNER_FOLDER_CONFIG_MYAPPS}:ro -v ${DOCKER_STARK_MODULE_SUBMODULE_MAIN_CONFIG_HOST_FOLDER_CONFIG_HOWARD}:${DOCKER_STARK_MODULE_SUBMODULE_MAIN_CONFIG_INNER_FOLDER_CONFIG_HOWARD}:ro -v ${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_DATA}:${DOCKER_STARK_INNER_FOLDER_DATA}:rw -v ${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_INPUT_RUNS}:${DOCKER_STARK_INNER_FOLDER_INPUT_RUNS}:ro -v ${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_INPUT_MANIFESTS}:${DOCKER_STARK_INNER_FOLDER_INPUT_MANIFESTS}:ro -v ${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_INPUT_PEDIGREE}:${DOCKER_STARK_INNER_FOLDER_INPUT_PEDIGREE}:ro -v ${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_OUTPUT_REPOSITORY}:${DOCKER_STARK_INNER_FOLDER_OUTPUT_REPOSITORY}:rw -v ${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_OUTPUT_DEPOSITORY}:${DOCKER_STARK_INNER_FOLDER_OUTPUT_ARCHIVES}:rw -v ${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_OUTPUT_FAVORITES}:${DOCKER_STARK_INNER_FOLDER_OUTPUT_FAVORITES}:rw -v ${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_SERVICES}/${DOCKER_STARK_SERVICES_FOLDER_STARK_API}:${DOCKER_STARK_INNER_FOLDER_SERVICES}/${DOCKER_STARK_SERVICES_FOLDER_STARK_API}
 # Docker STARK container mount parameters - databases config data input repository archives services results demultiplexing
 # add -v ${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_OUTPUT_RESULTS}:${DOCKER_STARK_INNER_FOLDER_OUTPUT_RESULTS}:rw -v ${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_OUTPUT_DEMULTIPLEXING}:${DOCKER_STARK_INNER_FOLDER_OUTPUT_DEMULTIPLEXING}:rw
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_PARAM_CONTAINER_MOUNT_FULL=-v ${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_DATABASES}:${DOCKER_STARK_INNER_FOLDER_DATABASES}:ro -v ${DOCKER_STARK_MODULE_SUBMODULE_MAIN_CONFIG_HOST_FOLDER_CONFIG_MYAPPS}:${DOCKER_STARK_MODULE_SUBMODULE_MAIN_CONFIG_INNER_FOLDER_CONFIG_MYAPPS}:ro -v ${DOCKER_STARK_MODULE_SUBMODULE_MAIN_CONFIG_HOST_FOLDER_CONFIG_HOWARD}:${DOCKER_STARK_MODULE_SUBMODULE_MAIN_CONFIG_INNER_FOLDER_CONFIG_HOWARD}:ro -v ${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_DATA}:${DOCKER_STARK_INNER_FOLDER_DATA}:rw -v ${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_INPUT_RUNS}:${DOCKER_STARK_INNER_FOLDER_INPUT_RUNS}:ro -v ${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_INPUT_MANIFESTS}:${DOCKER_STARK_INNER_FOLDER_INPUT_MANIFESTS}:ro -v ${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_INPUT_PEDIGREE}:${DOCKER_STARK_INNER_FOLDER_INPUT_PEDIGREE}:ro -v ${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_OUTPUT_REPOSITORY}:${DOCKER_STARK_INNER_FOLDER_OUTPUT_REPOSITORY}:rw -v ${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_OUTPUT_DEPOSITORY}:${DOCKER_STARK_INNER_FOLDER_OUTPUT_ARCHIVES}:rw -v ${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_OUTPUT_FAVORITES}:${DOCKER_STARK_INNER_FOLDER_OUTPUT_FAVORITES}:rw -v ${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_SERVICES}/${DOCKER_STARK_SERVICES_FOLDER_STARK_API}:${DOCKER_STARK_INNER_FOLDER_SERVICES}/${DOCKER_STARK_SERVICES_FOLDER_STARK_API} -v ${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_OUTPUT_RESULTS}:${DOCKER_STARK_INNER_FOLDER_OUTPUT_RESULTS}:rw -v ${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_OUTPUT_DEMULTIPLEXING}:${DOCKER_STARK_INNER_FOLDER_OUTPUT_DEMULTIPLEXING}:rw






# SERVICE LISTENER
####################


### DOCKER SERVICE INFOS

DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_NAME=listener
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_RELEASE=1.0


### DOCKER SERVICE IMAGE
# Docker STARK service to build images if necessary. Usually on a git repository or locally

#DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_IMAGE_REPOSITORY=${DOCKER_STARK_SERVICE_IMAGE_REGISTRY}
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_IMAGE_NAME=${DOCKER_STARK_MODULE_SUBMODULE_PREFIX}-service-${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_NAME}
#DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_IMAGE_TAG=1.0
#DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_IMAGE_CONTEXT=./${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_NAME}/dockerfile
#DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_IMAGE_CONTEXT_DOCKERFILE=Dockerfile
#DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_IMAGE=${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_IMAGE_REPOSITORY}${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_IMAGE_NAME}:${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_IMAGE_TAG}
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_IMAGE=${DOCKER_STARK_IMAGE}


### DOCKER SERVICE CONTAINER

DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_CONTAINER_NAME=${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_IMAGE_NAME}
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_CONTAINER_ENTRYPOINT=/bin/bash
#DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_CONTAINER_COMMAND='-c "while true; do sleep $DAEMON_PERIODICITY; done"'
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_CONTAINER_COMMAND='-c "/tool/bin/STARK.listener --no_header --command=LAUNCHER --launcher=\"http://$API_CONTAINER_NAME:$API_PORT_TARGET/analysis\" --days=$DAYS --condition=\"$CONDITIONS\" --exec --daemon --daemon-periodicity=$DAEMON_PERIODICITY --input=$INPUT --docker-stark-image=$DOCKER_STARK_IMAGE --log=$LOG_FOLDER "'
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_CONTAINER_RESTART=always
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_CONTAINER_ENV_FILE=./${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_NAME}/STARK.env



### DOCKER SERVICE CONFIG

DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_HOST_FOLDER_CONFIG=${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_CONFIG}/${DOCKER_STARK_MODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_NAME}
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_INNER_FOLDER_CONFIG=${DOCKER_STARK_INNER_FOLDER_CONFIG}/${DOCKER_STARK_MODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_NAME}


### DOCKER SERVICE SERVICE

DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_HOST_FOLDER_SERVICES=${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_SERVICES}/${DOCKER_STARK_MODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_NAME}
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_INNER_FOLDER_SERVICES=${DOCKER_STARK_INNER_FOLDER_SERVICES}/${DOCKER_STARK_MODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_NAME}



### DOCKER SERVICE PARAMETERS
# Parameters used by the container

# Run Days old 
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_PARAM_DAYS=10

# Run Conditions
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_PARAM_CONDITIONS="RTAComplete.txt&SampleSheet.csv"

# Daemon periodicity
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_PARAM_DAEMON_PERIODICITY=60

# Input Run
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_PARAM_INPUT=${DOCKER_STARK_INNER_FOLDER_INPUT_RUNS}


# Docker STARK Image
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_PARAM_DOCKER_STARK_IMAGE=${DOCKER_STARK_IMAGE}


# Log folder
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_PARAM_LOG_FOLDER=${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_INNER_FOLDER_SERVICES}





# SERVICE LISTENERCLEAR
#########################


### DOCKER SERVICE INFOS

DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_NAME=listenerclear
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_RELEASE=1.0


### DOCKER SERVICE IMAGE
# Docker STARK service to build images if necessary. Usually on a git repository or locally

#DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_IMAGE_REPOSITORY=${DOCKER_STARK_SERVICE_IMAGE_REGISTRY}
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_IMAGE_NAME=${DOCKER_STARK_MODULE_SUBMODULE_PREFIX}-service-${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_NAME}
#DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_IMAGE_TAG=1.0
#DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_IMAGE_CONTEXT=./${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_NAME}/dockerfile
#DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_IMAGE_CONTEXT_DOCKERFILE=Dockerfile
#DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_IMAGE_CONTEXT_DOCKERFILE=.env
#DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_IMAGE=${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_IMAGE_REPOSITORY}${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_IMAGE_NAME}:${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_IMAGE_TAG}
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_IMAGE=${DOCKER_STARK_IMAGE}


### DOCKER SERVICE CONTAINER

DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_CONTAINER_NAME=${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_IMAGE_NAME}
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_CONTAINER_ENTRYPOINT=/bin/bash
#DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_CONTAINER_COMMAND='-c "while true; do sleep $DAEMON_PERIODICITY; done"'
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_CONTAINER_COMMAND='-c "/tool/bin/STARK.listener.clear --clear --listener=$LISTENER_FOLDER --launcher=$API_FOLDER "'
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_CONTAINER_RESTART=always
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_CONTAINER_ENV_FILE=./${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_NAME}/STARK.env



### DOCKER SERVICE CONFIG

DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_HOST_FOLDER_CONFIG=${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_CONFIG}/${DOCKER_STARK_MODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_NAME}
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_INNER_FOLDER_CONFIG=${DOCKER_STARK_INNER_FOLDER_CONFIG}/${DOCKER_STARK_MODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_NAME}


### DOCKER SERVICE SERVICE

DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_HOST_FOLDER_SERVICES=${DOCKER_STARK_MAIN_FOLDER}/${DOCKER_STARK_FOLDER_SERVICES}/${DOCKER_STARK_MODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_NAME}
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_INNER_FOLDER_SERVICES=${DOCKER_STARK_INNER_FOLDER_SERVICES}/${DOCKER_STARK_MODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_NAME}/${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_NAME}



### DOCKER SERVICE PARAMETERS
# Parameters used by the container

# Listener service folder
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_PARAM_LISTENER_FOLDER=${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENER_INNER_FOLDER_SERVICES}

# API service folder
DOCKER_STARK_MODULE_SUBMODULE_SERVICE_LISTENERCLEAR_PARAM_API_FOLDER=${DOCKER_STARK_MODULE_SUBMODULE_SERVICE_API_INNER_FOLDER_SERVICES}
